{% extends 'attendance/framed_base.html' %}
{% block content %}
<p>This page shall list details about a job</p>
<ul>
	<li>Name: {{job.name|capfirst}}</li>
	<li>Date: {{job.start_date}}</li>
	<li>Location: {{job.location}}</li>
	{% comment %}
	{% if not job.has_roster %}
	<li>Booking has not been recorded yet.</li>
</ul>
<a class="btn btn-default" href="{% url 'attendance:add_roster' job.attendance_record.pk %}" role="button">Add Roster</a>
	{% elif not job.has_attendance %}
	{% endcomment %}
	{% if not job.has_attendance %}
	<li>Attendance has not been recorded yet.</li>
</ul>
<a class="btn btn-default" href="#" role="button">Add Attendance</a>
	{% else %}
	<li>Musicians Present: {{job.num_present}} out of {{job.num_booked}}</li>
	<li>On Strength Musicians Present: {{job.num_on_strength_present}} out of {{job.num_on_strength_booked}}
</ul>
<p></p>
<div class="table-responsive">
	<table class="table table-bordered table-condensed">
		<tr>
			<th>Rank</th>
			<th>Name</th>
			<th>Attended?</th>
		</tr>
		
		{% for musician, attendance in data.items %}
		<tr{% if musician.is_on_strength %} class="warning"{% endif %}>
			<td>{{musician.get_rank_display}}</td>
			<td>{{musician.name}}</td>
			<td>
				{% if attendance == 'O' %}
					<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
				{% elif attendance == 'L' %}
					<span class="glyphicon glyphicon-time" aria-hidden="true"></span>
				{% elif attendance == 'A' %}
					<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
				{% elif attendance == 'E' %}
					<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>
				{% else %}
					{{attendance}}
				{% endif %}
			</td> 
		</tr>
		{% endfor %}

	</table>
</div>
{% endif %}

{% endblock %}